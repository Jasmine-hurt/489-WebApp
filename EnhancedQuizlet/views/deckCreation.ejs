<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/stylesheets/deckCreation.css">
    <link rel="stylesheet" href="/stylesheets/style.css">
</head>
<body>
    <%- include('components/navbar') %>

    <div class="container mt-4">
      <form id="deckForm" action="/decks/create" method="POST">
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h1>Create a new deck</h1>
          <button type="submit" class="btn btn-primary">Create</button>
        </div>
    
        <!-- Deck Title -->
        <div class="mb-3">
          <input type="text" class="form-control" name="title" placeholder="Enter deck title" required>
        </div>
    
        <!-- Deck Description -->
        <div class="mb-3">
          <textarea class="form-control" name="description" rows="3" placeholder="Enter deck description" required></textarea>
        </div>
    
        <hr>
    
        <!-- Flashcard Inputs -->
        <div class="mb-3">
        </div>
        
        <div id="box-container" class="mt-4">
            <% flashcards.forEach((flashcard, index) => { %>
                <div class="mb-3 p-3 border rounded">
                    <div class="row g-2">
                        <div class="col-md-5">
                            <!-- <input name="flashcards[<%= index%>].term" type="text" class="form-control" placeholder="Term" required> -->
                            <input name="term[<%= index%>]" type="text" class="form-control" placeholder="Term" required>
                        </div>
                        <div class="col-md-5">
                            <!-- <input name="flashcards[<%= index%>].description" type="text" class="form-control" placeholder="Definition" required> -->
                            <input name="description[<%= index%>]" type="text" class="form-control" placeholder="Definition" required>
                        </div>
                        <div class="col-md-2 d-grid">
                            <button type="button" class="btn btn-danger" onclick="this.closest('div.mb-3').remove()">Delete</button>
                        </div>
                    </div>
                </div>
            <% }) %>
            <div class="box" onclick="createBox()">Add a Card </div>
        </div>


      </form>
    </div>
    
    <script>
        let cardIndex = 0;

        function createBox() {
            // Create a new div element for the box
            const newBox = document.createElement("div");
            newBox.classList.add("box");

            // Create a container for the inputs
            const inputContainer = document.createElement("div");
            inputContainer.classList.add("box-inputs");

            // Create two input fields
            const input1 = document.createElement("input");
            input1.type = "text";
            input1.placeholder = "Enter term";

            const input2 = document.createElement("input");
            input2.type = "text";
            input2.placeholder = "Enter definition";

            // Append the inputs to the container
            inputContainer.appendChild(input1);
            inputContainer.appendChild(input2);

            // Create a delete button
            const deleteButton = document.createElement("button");
            deleteButton.textContent = "Delete";
            deleteButton.classList.add("btn", "btn-gray", "ms-2"); // Apply custom gray button class

            // Add the delete functionality
            deleteButton.onclick = function() {
                newBox.remove(); // Remove the box when the delete button is clicked
            };

            // Append the input container and delete button to the new box
            newBox.appendChild(inputContainer);
            newBox.appendChild(deleteButton);

            // Get the container to append the new box
            const boxContainer = document.getElementById("box-container");

            // Insert the new box at the top of the container
            boxContainer.insertBefore(newBox, boxContainer.firstChild);
        }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>